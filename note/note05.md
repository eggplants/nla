# 自然言語解析基礎05回(構文解析) (11/2)

## チョムスキー標準形

### 3つの基本的な文法規則

- $A \rightarrow BC$
  - B, Cは非終端記号
- $A \rightarrow w$
  - w(またはα)は終端記号
- $S \rightarrow ε$
  - Sは開始記号, εは空列

### 性質

- 文脈自由文法規則は，チョムスキー標準形に変換できる
  - チョムスキー標準形で表せる文法は文脈自由である
- Aが入力単語列$i..j$なら$i < k < j$となる$k$が存在する
  - BとCはどこかで分離する

### 標準形への変換

- $S \rightarrow A, A \rightarrow B \Rightarrow S \rightarrow B$
- 右辺が項数3以上($S \rightarrow A B C$)なら新しい非終端記号を導入(拡張)
  - $S \rightarrow X C (X \rightarrow A B)$

## チャートパーサ1: CKY法(Cocke-Kasami-Younger法)

- 構文木を構築するアルゴリズム
- O(N^3)
- 入力形態素列を$i .. j$に配置
- 非終端記号$A$を対応付ける三角形の表を構築
- 開始記号$S$(非終端記号)で全ての単語列$[0, n]$をカバー
- 表をボトムアップに構築して、$A$の部分はある$k$で$i .. k, k .. j$で分割される

## チャートパーサ2: アーリー法

- 任意の文脈自由文法規則を許す
- O(N^3)
  - 文法規則が予め用意されているのなら、O(N^2)
- 左からドットを動かす
- トップダウン制御

### 3つの状態

- 長さ$N$の入力単語列に対して3つの状態を$N+1$個持つ(ドット規則に依って表現)
  - 処理中の構成素
    - $S \rightarrow \cdot　VP [0, 0]$
  - 予測された構成素
    - $NP \rightarrow Det \cdot Nominal [1, 2]$
  - 完了した構成素
    - $VP \rightarrow V　NP \cdot [0, 3]$

### 3つの操作

- Predictor
  - ドットを左側に持つ非終端記号を左辺に持つ規則をトップダウンに適用
    - ありえる規則集合を構築
- Scanner
  - 入力文の品詞を読み込みドットを右側に移動
- Completer
  - 完了した状態に対し、前の位置で適用した規則集合から、規則の左辺にある非終端記号を右辺に持つ規則を選択し，ドットを右側へ

## 依存文法の構文解析（Dependency Parsing）

- 文における各単語間の依存構造(修飾関係、動名詞、他動詞...)に付けた型ラベルを用いて構文解析を行う
  - 型なしならば単純に構文解析木をかけばよい

### 遷移ベースの「依存構造の構文解析」

- 3つの操作(arc-eager)
  - LEFTARC
    - スタックの一番目<=二番目として一番目をPOP
  - RIGHTARC
    - スタックの一番目=>二番目として二番目をPOP
  - SHIFT(POP)
    - スタックでARC出来ない&&バッファが空でない時
    - バッファからPOPしスタック先頭にPUSH

## アーリー・CKY・遷移の並列性

### 文法規則の適用における並列性

- 横型探索（幅優先探索）
  - 1ステップ進むたびに適用可能な文法規則をすべて適用し，適用結果を保持したまま次のステップに進む
  - コケたらバックトラックして、文全体にマッチする規則を探索
- CKY法
  - ボトムアップに適用できる規則をすべて適用したのち，トップダウンに規則を絞り込む
- アーリー法
  - トップダウンに適用できる規則をすべて適用したのち，ボトムアップに規則を絞り込む
- 遷移法
  - SHIFTやARC処理を行う際に，規則の曖昧性が生じた場合に，スタックを複数用意（一般化遷移/GLR法）
- 曖昧性の解消が課題
  - 一意に構文解析の結果を絞り込むには
    - 頻出度(出現確率)でランク？

## 確率文脈自由文法

- 曖昧性解消のための戦略
- 構文規則に確率を対応させ、曖昧性がある時最も確率の高くなる構文木を選択
- 文に品詞がラベリングされたコーパスから文法規則の出現確率を前計算
  - (特定の品詞規則の出現回数)/(特定の品詞の出現回数)
- 欠点: 同確率になった時困る（ex: 並列構造の解析）
  - [dogs / in / houses] / and / cats => OK
  - dogs / in / [houses / and / cats] => NG

### 日本語の並列構造

- 日本語での並列構造の曖昧性解決
- 名詞並列(「青と赤」)と述語並列(「私は生きるか死ぬか選ぶ。」)
- 京都大学のKNPでは「並列している要素は，文節列同士の構造が似ている」と仮定

## 再帰的ニューラルネットワーク(RNN)を利用した構文解析

- 英語での前置詞句付加(PP attachment)の曖昧性解決が難しい
  - workers [dumped / socks / into a bin]ゴミ箱に袋を投げ入れた
  - workers dumped [socks / into a bin]ゴミ箱にある袋
  - 頻出度はVBD NP PP < NNS PPなので後者が選択されがち
  - 「[dump ~ into]の結びつきのほうが強い」という語彙依存関係を考慮する必要
- 単語ベクトル空間(word vector space)上に句をマッピング
  - word2vecが有名
- 構成素の原理
  - 意味は、全体を構成する「部分の意味」から構成される
  - 各句の意味ベクトルは「各単語の意味」「単語動詞」を考慮して決定
    - 意味ベクトル2つをNNに入力して1つの句のベクトルを算出
    - 最も高いスコアの組み合わせを選択
    - rootまで再帰的に繰り返す